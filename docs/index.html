<!doctype html>
<html lang="pt-br">
<head>
	<meta charset="utf-8" />
	<title>Documentação da API i-Fasil</title>
	<link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist/swagger-ui.css" />
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" />
	<style>
	body { margin: 10px 50px; padding: 0; }
	textarea.body-param__text {
		min-height: 120px;
		max-height: auto;
		resize: vertical;
	}
	.doc-selector-container {
		margin-top: 0px;
		margin-right: auto;
		margin-bottom: 0px;
		margin-left: 15px;
	}
	</style>
</head>
<body>

	<div class="doc-selector-container">
		<label for="yaml-selector">Selecione a documentação:</label>
		<select id="yaml-selector" class="form-select"></select>
	</div>
	
	<div id="swagger-ui"></div>
	<script src="https://unpkg.com/swagger-ui-dist/swagger-ui-bundle.js"></script>
	<script>
	// ✅ Lista dos YAMLs
	const arquivosYaml = [
		"https://raw.githubusercontent.com/fabriciodemedeiros/fabriciodemedeiros.github.io/refs/heads/main/docs/auth.yaml",
		"https://raw.githubusercontent.com/fabriciodemedeiros/fabriciodemedeiros.github.io/refs/heads/main/docs/usuarios.yaml",
		"https://raw.githubusercontent.com/fabriciodemedeiros/fabriciodemedeiros.github.io/refs/heads/main/docs/servidores.yaml"
	];
	let ui;
	function inicializarSeletor() {
		const seletor = document.getElementById('yaml-selector');
		arquivosYaml.forEach(arquivo => {
			const option = document.createElement('option');
		option.value = arquivo;
		option.textContent = arquivo.split("/").pop();
		seletor.appendChild(option);
		});

		if (arquivosYaml.length > 0) {
			carregarSwagger(arquivosYaml[0]);
		}
		seletor.addEventListener('change', function () {
			carregarSwagger(this.value);
		});
    }
    function carregarSwagger(arquivoYaml) {
		if (ui) {
			ui.specActions.updateUrl(arquivoYaml);
			ui.specActions.download();
		} else {
			ui = SwaggerUIBundle({
				url: arquivoYaml,
				dom_id: '#swagger-ui',
				presets: [SwaggerUIBundle.presets.apis],
				layout: 'BaseLayout'
			});
		}
	}
    window.onload = inicializarSeletor;
	</script>

</body>
</html>
